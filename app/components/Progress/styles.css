progress {
  flex-grow: 1;
  flex-shrink: 1;
  width: 100%;
}

/* Styling an indeterminate progress bar */
progress:not(value) {
}

/* Styling the determinate progress element */
progress[value] {
	/* Get rid of the default appearance */
	-webkit-appearance: none;
	-moz-appearance: none;
	appearance: none;

	/* This unfortunately leaves a trail of border behind in Firefox and Opera. We can remove that by setting the border to none. */
	border: none;

	/* Although firefox doesn't provide any additional pseudo class to style the progress element container, any style applied here works on the container. */
  background-color: var(--progress-background-color);
	border-radius: var(--progress-border-radius);
	box-shadow: var(--progress-box-shadow);

	/* Of all IE, only IE10 supports progress element that too partially. It only allows to change the background-color of the progress value using the 'color' attribute. */
	color: royalblue;

	position: relative;
}

/*
Webkit browsers provide two pseudo classes that can be use to style HTML5 progress element.
-webkit-progress-bar -> To style the progress element container
-webkit-progress-value -> To style the progress element value.
*/

progress[value]::-webkit-progress-bar {
  background-color: var(--progress-background-color);
	border-radius: var(--progress-border-radius);
	box-shadow: var(--progress-box-shadow);
}

progress[value]::-webkit-progress-value {
	position: relative;

	background-size: 100% 100%;
	border-radius: var(--progress-border-radius);
}

/* Let's spice up things little bit by using pseudo elements. */

progress[value]::-webkit-progress-value:after {
	/* Only webkit/blink browsers understand pseudo elements on pseudo classes. A rare phenomenon! */
	content: '';
	position: absolute;

	width: 5px;
  height: 5px;
	top: 7px;
  right: 7px;

	background-color: white;
	border-radius: 100%;
}

/* Firefox provides a single pseudo class to style the progress element value and not for container. -moz-progress-bar */

progress[value]::-moz-progress-bar {
	background-color: var(--progress-bar-background-color);
	background-image:
    -moz-linear-gradient(
      top,
      rgba(255, 255, 255, .25),
      rgba(0,0,0,.2)
    );

	background-size: 100% 100%;
	border-radius: var(--progress-border-radius);

	/* Firefox doesn't support CSS3 keyframe animations on progress element. Hence, we did not include animate-stripes in this code block */
}

progress::-webkit-progress-value {
	background-color: var(--progress-bar-background-color);
	background-image:
    -webkit-linear-gradient(
      top,
      rgba(255, 255, 255, 0.25),
      rgba(0, 0, 0, 0.2)
    );
}

/* Similarly, for Mozillaa. Unfortunately combining the styles for different browsers will break every other browser. Hence, we need a separate block. */

progress::-moz-progress-bar {
	background-color: var(--progress-bar-background-color);
  background-image:
    -moz-linear-gradient(
      top,
      rgba(255, 255, 255, 0.25),
      rgba(0, 0, 0, 0.2)
    );
}
